class ImgJust{idealHeight=150;rowGap=0;columnGap=0;paddingLeft=0;paddingRight=0;paddingTop=0;paddingBottom=0;reload(){let t=this.container;getComputedStyle(t);let e=this.imgs,i=t.getBoundingClientRect().width-this.paddingLeft-this.paddingRight;if(i<=0)throw"ImgJust Error: No room for images. Client width is too small.";let s=[];for(var n=0;n<e.length;n++)s.push(e[n].naturalWidth*this.idealHeight/e[n].naturalHeight);let r=[],o=[];for(var a=new Map,l=new Map,h=-this.columnGap,g=0;g<e.length;g++){h+=s[g]+this.columnGap;let d=h-i;a.set(g,d*d),l.set(g,0)}r.push(a),o.push(l);for(var p=1;p<e.length;p++){a=new Map,l=new Map;for(var g=p;g<e.length;g++){h=s[g];let m=h-i;for(var f=m*m+r[p-1].get(g-1),u=g,c=g-1;c>=p;c--){h+=s[c]+this.columnGap;let y=h-i,$=y*y+r[p-1].get(c-1);$<f&&(f=$,u=c)}a.set(g,f),l.set(g,u)}r.push(a),o.push(l)}var p=0,w=p,f=r[p].get(e.length-1);for(p++;p<r.length;p++){let v=r[p].get(e.length-1);v<f&&(f=v,w=p)}for(var x=[],_=e.length,p=w;p>=0;p--){let G=_-1,R=o[p].get(G);x.unshift({start:R,end:G}),_=R}for(var B of x){for(var I=0,n=B.start;n<=B.end;n++)I+=s[n],e[n].style.marginBottom=this.rowGap+"px";let H=i-(B.end-B.start)*this.columnGap,J=Math.round(this.idealHeight*H/I);for(var L=0,n=B.start;n<B.end;n++){let E=Math.round(s[n]*H/I);L+=E+this.columnGap,e[n].style.width=E+"px",e[n].style.height=J+"px",e[n].style.marginRight=this.columnGap+"px"}e[B.end].style.width=i-L+"px",e[B.end].style.height=J+"px",e[B.end].style.marginRight="0"}let T=x[x.length-1];for(var n=T.start;n<=T.end;n++)e[n].style.marginBottom="0";for(let C of e)C.style.display="block"}addImages(t){for(let e of t)e.style.display="none",this.imgs.push(e)}constructor(t,e=[],i={}){for(var[s,n]of Object.entries(i))this[s]=n;if(!t)throw"ImgJust Error: missing first argument in constructor: container";if(!e)throw"ImgJust Error: missing second argument in constructor: imgs";this.container=t,this.imgs=[],t.style.display="flex",t.style.flexFlow="row wrap",t.style.paddingTop=this.paddingTop+"px",t.style.paddingBottom=this.paddingBottom+"px",t.style.paddingLeft=this.paddingLeft+"px",t.style.paddingRight=this.paddingRight+"px",this.addImages(e),this.reload(),addEventListener("resize",t=>this.reload())}}